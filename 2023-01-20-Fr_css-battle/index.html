<!DOCTYPE html>
<html lang="lt">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
        <meta http-equiv="Pragma" content="no-cache"/>
        <meta http-equiv="Expires" content="0"/>
        <title>Css battle solutions</title>
        <link rel="stylesheet" href="index.css">
    </head>

    <body id="body">
        <div class="container">
            <a
                href="https://github.com/codevivi/BIT_JS-2023-01-09_friday-assignments/tree/master/2023-01-20-Fr_css-battle">GitHub
                files</a>
            <h1>Css battle solutions</h1>
            <h2 id="title"></h2>
            <div class="box">
                <iframe src="battle-115-1.html" height="300" width="400">
                </iframe>
                <pre>
                    <code></code>
                </pre>
            </div>
            <nav>
                <ul>
                    <li>Battle 115 <a href="https://cssbattle.dev/play/115">Link
                            to
                            CSS battle</a>
                        <ul>
                            <li>
                                <button type="button"
                                    data-src="battle-115-1.html"
                                    data-title="Battle 115 - Droplet">First
                                    solution</button>
                                <p class="description">With gradients</p>
                                <small class="score">Score: 606.9 (100% match)
                                    (426
                                    chars);
                                    <em>(minified version)</em></small>
                            </li>
                            <li>
                                <button type="button"
                                    data-src="battle-115-2.html"
                                    data-title="Battle 115 - Droplet">Second
                                    solution</button>
                                <p class="description">Without gradients</p>
                                <small class="score">Score: 608.43 (100% match)
                                    (405
                                    chars);
                                    <em>(minified version)</em></small>
                            </li>
                        </ul>
                    </li>
                    <li>Battle 137 <a href="https://cssbattle.dev/play/137">Link
                            to
                            CSS battle</a>
                        <ul>
                            <li>
                                <button type="button" data-src="battle-137.html"
                                    data-title="Battle 137 - Elbow">Solution</button>
                                <small class="score">Score: 677.64 (100% match)
                                    (172 chars);
                                    <em>(minified version)</em></small>
                            </li>
                        </ul>
                    </li>
                    <li>Battle 116 <a href="https://cssbattle.dev/play/116">Link
                            to
                            CSS battle</a>
                        <ul>
                            <li>
                                <button type="button" data-src="battle-116.html"
                                    data-title="Battle 116 - Headphones">Solution</button>
                                <small class="score">Score: 609.18 (100% match)
                                    (396 chars)
                                    <em>(minified version)</em></small>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
        <script>
        const nav = document.querySelector('nav');
        const frame = document.querySelector('iframe');
        const code = document.querySelector('code');
        const title = document.querySelector('#title');
        showCode();

        nav.addEventListener('click', (e) => {
            if (e.target.dataset.src) {
                code.innerHTML = '';
                frame.src = e.target.dataset.src;
                location.hash = 'body';
                showCode();
            }
        })
        function showCode() {
            const insideFrame = frame.contentWindow || frame.contentDocument;
            if (insideFrame) {
                setTimeout(() => { //probably not the best idea but otherwise need to click twice to update code..
                    title.textContent = insideFrame.document.title;
                    let insideFrameHtml = insideFrame.document.querySelector('body').innerHTML;
                    insideFrameHtml.split()
                    code.appendChild(document.createTextNode(substring(insideFrameHtml)));
                }, 1000);
            }
        }
        function substring(str) {
            const start = "CODE STARTS -->";
            const end = "<!-- ENDS CSS";
            const startIndex = str.indexOf(start);
            const endIndex = str.indexOf(end);
            if (startIndex !== -1 && endIndex !== -1) {
                return str.substring(startIndex + start.length, endIndex);
            }
            return '';
        }
    </script>
    </body>

</html>
